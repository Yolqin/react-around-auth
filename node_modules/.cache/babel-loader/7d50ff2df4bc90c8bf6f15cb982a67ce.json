{"ast":null,"code":"import _toConsumableArray from\"/Users/yolqin/Desktop/Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/yolqin/Desktop/Practicum/around-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect}from\"react\";import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import ImagePopup from\"./ImagePopup\";import PopupWithForm from\"./PopupWithForm\";import api from\"../utils/api\";import CurrentUserContext from'../context/CurrentUserContext';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";function App(){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),selectedCard=_React$useState2[0],setSelectedCard=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),profileDialog=_React$useState4[0],setProfileDialog=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),avatarDialog=_React$useState6[0],setAvatarDialog=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),cardDialog=_React$useState8[0],setCardDialog=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),deleteDialog=_React$useState10[0],setDeleteDialog=_React$useState10[1];var _React$useState11=React.useState({name:'',about:'',avatar:''}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];useEffect(function(){Promise.all([api.getUserInfo(),api.getInitialCards({})]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),user=_ref2[0],initialCards=_ref2[1];setCurrentUser(user);setCards(initialCards);}).catch(function(err){return console.log(err);});},[]);function handleCardClick(card){setSelectedCard(card);}function handleEditAvatarClick(){setAvatarDialog(true);}function handleEditProfileClick(){setProfileDialog(true);}function handleAddPlaceClick(){setCardDialog(true);}function handleCardDelete(card){api.removeCard(card._id).then(function(){var newCards=cards.filter(function(c){return c._id!==card._id;});setCards(newCards);}).catch(function(err){return console.log(err);});}function closeAllPopups(e){setSelectedCard(false);setProfileDialog(false);setAvatarDialog(false);setCardDialog(false);setDeleteDialog(false);}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.updateLikes(card._id,!isLiked).then(function(newCard){var newCards=cards.map(function(c){return c._id===card._id?newCard:c;});setCards(newCards);}).catch(function(err){return console.log(err);});}function handleUpdateUser(userData){api.setUserInfo(userData).then(function(user){setCurrentUser(user);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleUpdateAvatar(avatarData){api.setUserAvatar(avatarData).then(function(user){setCurrentUser(user);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleAddPlaceSubmit(cardData){api.addCard({name:cardData.name,link:cardData.link}).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page__content\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onCardClick:handleCardClick,onProfileEdit:handleEditProfileClick,onAvatarEdit:handleEditAvatarClick,onCardAdd:handleAddPlaceClick,onCardDelete:handleCardDelete,cards:cards,onCardLike:handleCardLike}),/*#__PURE__*/_jsx(Footer,{})]}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:profileDialog,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:avatarDialog,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:cardDialog,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"delete-confirmation\",title:\"Are you sure?\",isOpen:deleteDialog,onClose:closeAllPopups,submitText:\"Yes\"}),/*#__PURE__*/_jsx(ImagePopup,{selectedCard:selectedCard,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"sources":["/Users/yolqin/Desktop/Practicum/around-react/src/components/App.js"],"names":["React","useEffect","Header","Main","Footer","ImagePopup","PopupWithForm","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","useState","selectedCard","setSelectedCard","profileDialog","setProfileDialog","avatarDialog","setAvatarDialog","cardDialog","setCardDialog","deleteDialog","setDeleteDialog","name","about","avatar","currentUser","setCurrentUser","cards","setCards","Promise","all","getUserInfo","getInitialCards","then","user","initialCards","catch","err","console","log","handleCardClick","card","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardDelete","removeCard","_id","newCards","filter","c","closeAllPopups","e","handleCardLike","isLiked","likes","some","i","updateLikes","newCard","map","handleUpdateUser","userData","setUserInfo","handleUpdateAvatar","avatarData","setUserAvatar","handleAddPlaceSubmit","cardData","addCard","link"],"mappings":"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","sourcesContent":["import React, {useEffect} from \"react\";\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from \"./ImagePopup\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport api from \"../utils/api\"\nimport CurrentUserContext from '../context/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nfunction App() {\n\n    const [selectedCard, setSelectedCard] = React.useState(null);\n    const [profileDialog, setProfileDialog] = React.useState(false);\n    const [avatarDialog, setAvatarDialog] = React.useState(false);\n    const [cardDialog, setCardDialog] = React.useState(false);\n    const [deleteDialog, setDeleteDialog] = React.useState(false);\n    const [currentUser, setCurrentUser] = React.useState({name: '', about: '', avatar: ''});\n    const [cards, setCards] = React.useState([]);\n\n    useEffect(() => {\n        Promise.all([api.getUserInfo(), api.getInitialCards({})])\n            .then(([user, initialCards]) => {\n                setCurrentUser(user)\n                setCards(initialCards)\n            })\n            .catch(err => console.log(err))\n    }, [])\n\n    function handleCardClick(card) {\n        setSelectedCard(card);\n    }\n\n    function handleEditAvatarClick() {\n        setAvatarDialog(true);\n    }\n\n    function handleEditProfileClick() {\n        setProfileDialog(true);\n    }\n\n    function handleAddPlaceClick() {\n        setCardDialog(true);\n    }\n\n    function handleCardDelete(card) {\n        api.removeCard(card._id)\n            .then(() => {\n                const newCards = cards.filter((c) => c._id !== card._id);\n                setCards(newCards);\n            })\n            .catch(err => console.log(err))\n    }\n\n    function closeAllPopups(e) {\n        setSelectedCard(false);\n        setProfileDialog(false);\n        setAvatarDialog(false);\n        setCardDialog(false);\n        setDeleteDialog(false);\n    }\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n        api.updateLikes(card._id, !isLiked)\n            .then((newCard) => {\n            const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n            setCards(newCards);\n        })\n            .catch(err => console.log(err))\n    }\n\n    function handleUpdateUser(userData) {\n        api.setUserInfo(userData)\n            .then((user) => {\n                setCurrentUser(user);\n                closeAllPopups();\n            })\n            .catch(err => console.log(err))\n    }\n\n    function handleUpdateAvatar(avatarData) {\n        api.setUserAvatar(avatarData)\n            .then((user) => {\n                setCurrentUser(user);\n                closeAllPopups();\n            })\n            .catch(err => console.log(err))\n    }\n\n    function handleAddPlaceSubmit(cardData) {\n        api.addCard({name: cardData.name, link: cardData.link})\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                closeAllPopups();\n            })\n            .catch(err => console.log(err));\n    }\n\n    return (\n\n        <CurrentUserContext.Provider value={currentUser}>\n            <div className=\"page\">\n                <div className=\"page__content\">\n                    <Header/>\n                    <Main\n                        onCardClick={handleCardClick}\n                        onProfileEdit={handleEditProfileClick}\n                        onAvatarEdit={handleEditAvatarClick}\n                        onCardAdd={handleAddPlaceClick}\n                        onCardDelete={handleCardDelete}\n                        cards = {cards}\n                        onCardLike={handleCardLike}\n                    />\n                    <Footer/>\n                </div>\n\n                <EditProfilePopup isOpen={profileDialog} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n                <EditAvatarPopup isOpen={avatarDialog} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n                <AddPlacePopup isOpen={cardDialog} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n\n                <PopupWithForm\n                    name='delete-confirmation'\n                    title='Are you sure?'\n                    isOpen={deleteDialog}\n                    onClose={closeAllPopups}\n                    submitText='Yes'\n                />\n\n                <ImagePopup\n                    selectedCard={selectedCard}\n                    onClose={closeAllPopups}\n                />\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}